<div class="flex flex-col items-center justify-center min-h-screen bg-slate-50 dark:bg-surface-950 p-4">
	<p-card class="w-full max-w-md shadow-2xl border-0 overflow-hidden" styleClass="p-2">
		<ng-template pTemplate="header">
			<div class="bg-primary p-6 text-center">
				<h2 class="text-2xl font-bold text-white uppercase tracking-wider m-0">Cambiar Contraseña</h2>
			</div>
		</ng-template>

		<form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex flex-col gap-6 p-4">
			<div class="flex flex-col gap-2">
				<label class="text-sm font-semibold text-slate-600 dark:text-slate-400">Contraseña Actual</label>
				<p-password
					formControlName="currentPassword"
					[toggleMask]="true"
					[feedback]="false"
					placeholder="********"
					styleClass="w-full"
					inputStyleClass="w-full p-3 bg-slate-50 dark:bg-surface-900 border-slate-200 dark:border-surface-700"
					fluid="true"
				/>
			</div>

			<div class="flex flex-col gap-2">
				<label class="text-sm font-semibold text-slate-600 dark:text-slate-400">Nueva Contraseña</label>
				<p-password
					formControlName="newPassword"
					[toggleMask]="true"
					placeholder="********"
					styleClass="w-full"
					inputStyleClass="w-full p-3 bg-slate-50 dark:bg-surface-900 border-slate-200 dark:border-surface-700"
					promptLabel="Ingresa tu nueva contraseña"
					weakLabel="Débil"
					mediumLabel="Media"
					strongLabel="Fuerte"
					fluid="true"
				>
					<ng-template pTemplate="footer">
						<p class="mt-2 text-xs text-slate-500">Mínimo 6 caracteres</p>
					</ng-template>
				</p-password>
			</div>

			<div class="flex flex-col gap-2">
				<label class="text-sm font-semibold text-slate-600 dark:text-slate-400">Confirmar Nueva Contraseña</label>
				<p-password
					formControlName="confirmPassword"
					[toggleMask]="true"
					[feedback]="false"
					placeholder="********"
					styleClass="w-full"
					inputStyleClass="w-full p-3 bg-slate-50 dark:bg-surface-900 border-slate-200 dark:border-surface-700"
					fluid="true"
				/>
				@if (form.hasError('mismatch') && form.get('confirmPassword')?.touched) {
					<span class="text-red-500 text-xs font-medium animate-fade-in">Las contraseñas no coinciden</span>
				}
			</div>

			<div class="mt-4">
				<p-button
					type="submit"
					label="Actualizar Contraseña"
					icon="pi pi-lock"
					[loading]="isLoading()"
					[disabled]="form.invalid || isLoading()"
					styleClass="w-full p-4 font-bold uppercase tracking-widest transition-all duration-300 transform active:scale-95"
					severity="primary"
					rounded="true"
				/>
			</div>
		</form>
	</p-card>
</div>
